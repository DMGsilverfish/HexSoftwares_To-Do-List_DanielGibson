<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #74ebd5, #ACB6E5); 
            margin: 0; 
            padding: 20px; 
        }
        .container { 
            max-width: 450px; 
            margin: auto; 
            background: #fff; 
            padding: 30px; 
            border-radius: 8px; 
            box-shadow: 0 0 15px rgba(0,0,0,0.2); 
        }
        h2 { text-align: center; font-size: 28px; margin-bottom: 20px; }
        input { 
            width: 70%; padding: 14px; font-size: 16px; 
            border: 2px solid #ccc; border-radius: 5px; outline: none; 
        }
        input:focus { border-color: #74ebd5; }
        .btn-submit { 
            padding: 14px 18px; font-size: 16px; cursor: pointer; 
            background: #4CAF50; color: white; border: none; border-radius: 5px; 
            transition: background 0.3s ease; 
        }
        .btn-submit:hover { background: #45a049; }
        ul { list-style-type: none; padding: 0; margin-top: 20px; }
        li { 
            background: #f2f2f2; padding: 14px; margin: 8px 0; display: flex; 
            justify-content: space-between; align-items: center; border-radius: 5px; 
            font-size: 18px; cursor: pointer; transition: transform 0.2s ease, background 0.3s ease; 
        }
        li:hover { transform: scale(1.03); background: #e8e8e8; }
        li.completed { text-decoration: line-through; color: white; background: #4CAF50 !important; }
        .delete-btn { 
            background: none; border: none; font-size: 20px; color: red; cursor: pointer; 
            transition: transform 0.2s ease; 
        }
        .delete-btn:hover { transform: scale(1.2); }

        .modal { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; z-index: 999; 
        }
        .modal-content { 
            background: #fff; padding: 25px; border-radius: 8px; text-align: center; font-size: 18px; width: 300px; 
        }
        .modal-buttons { margin-top: 20px; }
        .modal-buttons button { 
            padding: 10px 18px; margin: 5px; font-size: 16px; cursor: pointer; border: none; border-radius: 5px; 
        }
        #confirmYes { background: #4CAF50; color: white; }
        #confirmNo { background: #f44336; color: white; }
        #confirmYes:hover { background: #45a049; }
        #confirmNo:hover { background: #d32f2f; }
    </style>
</head>
<body>
    <div class="container">
        <h2>To-Do List</h2>
        <input type="text" id="taskInput" placeholder="Add new task..." focus>
        <button id="addBtn" class="btn-submit">Add</button>
        <ul id="taskList"></ul>
    </div>

    <!-- Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <p id="modalMessage"></p>
            <div class="modal-buttons">
                <button id="confirmYes">Yes</button>
                <button id="confirmNo">No</button>
            </div>
        </div>
    </div>

    <script>
        const taskInput = document.getElementById('taskInput');
        const taskList = document.getElementById('taskList');
        const addBtn = document.getElementById('addBtn');
        const modal = document.getElementById('confirmModal');
        const modalMessage = document.getElementById('modalMessage');
        const confirmYes = document.getElementById('confirmYes');
        const confirmNo = document.getElementById('confirmNo');

        let selectedTask = null;
        let actionType = ""; // "complete" or "delete"

        window.onload = function () {
            taskInput.focus();
            const savedTasks = JSON.parse(localStorage.getItem('tasks')) || [];
            savedTasks.forEach(task => addTaskToDOM(task.text, task.completed));
        };

        addBtn.addEventListener('click', addTask);
        taskInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') addTask();
        });

        function addTask() {
            const taskText = taskInput.value.trim();
            if (taskText === '') return;
            addTaskToDOM(taskText, false);
            saveTasks();
            taskInput.value = '';
            taskInput.focus();
        }

        function addTaskToDOM(text, completed) {
            const li = document.createElement('li');
            li.textContent = text;
            if (completed) li.classList.add('completed');

            li.addEventListener('click', function (e) {
                if (e.target.tagName === 'BUTTON') return;
                selectedTask = li;
                actionType = "complete";
                modalMessage.textContent = li.classList.contains('completed') 
                    ? "Mark this task as not completed?" 
                    : "Mark this task as completed?";
                modal.style.display = 'flex';
            });

            const deleteBtn = document.createElement('button');
            deleteBtn.innerHTML = 'ðŸ—‘';
            deleteBtn.className = 'delete-btn';
            deleteBtn.onclick = function (e) {
                e.stopPropagation();
                selectedTask = li;
                actionType = "delete";
                modalMessage.textContent = "Are you sure you want to delete this task?";
                modal.style.display = 'flex';
            };

            li.appendChild(deleteBtn);
            taskList.appendChild(li);
        }

        confirmYes.addEventListener('click', function () {
            if (selectedTask) {
                if (actionType === "complete") {
                    selectedTask.classList.toggle('completed');
                } else if (actionType === "delete") {
                    selectedTask.remove();
                }
                saveTasks();
            }
            closeModal();
        });

        confirmNo.addEventListener('click', closeModal);

        function closeModal() {
            modal.style.display = 'none';
            selectedTask = null;
            actionType = "";
        }

        function saveTasks() {
            const tasks = [];
            document.querySelectorAll('#taskList li').forEach(li => {
                tasks.push({ 
                    text: li.childNodes[0].textContent, 
                    completed: li.classList.contains('completed') 
                });
            });
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        window.addEventListener('click', function (e) {
            if (e.target === modal) closeModal();
        });
    </script>
</body>
</html>
